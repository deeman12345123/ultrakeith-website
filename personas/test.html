<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultra Keith Personas - Trading Cards</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;700&display=swap');
        
        :root {
            --primary-dark: #0F0F0F;
            --secondary-dark: #050505;
            --gold: #FFD700;
            --dark-gold: #B8860B;
            --silver: #C0C0C0;
            --border-radius: 12px;
            --mystical-blue: #00BFFF;
            --energy-purple: #8A2BE2;
            --plasma-pink: #FF1493;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background: linear-gradient(135deg, #000000 0%, #1a0000 50%, #0a0a0a 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .main-title {
            font-family: 'Orbitron', monospace;
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 900;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: var(--silver);
            margin-bottom: 20px;
        }
        
        /* DECK CONTAINER */
        .deck-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 60vh;
            margin: 40px 0;
            position: relative;
        }
        
        .deck-container.hidden {
            display: none;
        }
        
        /* DECK BOX */
        .deck-box {
            width: 300px;
            height: 450px;
            background: linear-gradient(145deg, #1a1a1a 0%, #000000 100%);
            border: 1px solid var(--gold);
            border-radius: 12px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .deck-box:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }
        
        .deck-box.mystical-hover {
            animation: mystical-pulse 2s ease-in-out infinite;
        }
        
        @keyframes mystical-pulse {
            0%, 100% { 
                filter: drop-shadow(0 0 15px rgba(0, 191, 255, 0.4));
                transform: scale(1.05);
            }
            50% { 
                filter: drop-shadow(0 0 25px rgba(138, 43, 226, 0.7));
                transform: scale(1.08);
            }
        }
        
        .deck-box.cracking {
            animation: deck-shake 0.8s ease-in-out infinite;
        }
        
        @keyframes deck-shake {
            0%, 100% { transform: translateX(0) scale(1.05); }
            25% { transform: translateX(-2px) scale(1.06); }
            75% { transform: translateX(2px) scale(1.04); }
        }
        
        /* MYSTICAL CRACKS */
        .mystical-crack {
            position: absolute;
            background: linear-gradient(45deg, var(--mystical-blue), var(--energy-purple));
            opacity: 0;
            transition: all 0.8s ease;
            box-shadow: 0 0 10px currentColor;
            z-index: 5;
            border-radius: 1px;
        }
        
        .crack-1 {
            top: 30%;
            left: 0;
            width: 2px;
            height: 40%;
            transform: rotate(15deg);
        }
        
        .crack-2 {
            top: 20%;
            right: 0;
            width: 2px;
            height: 35%;
            transform: rotate(-20deg);
        }
        
        .crack-3 {
            bottom: 25%;
            left: 20%;
            width: 60%;
            height: 2px;
            transform: rotate(5deg);
        }
        
        .crack-4 {
            top: 15%;
            left: 30%;
            width: 40%;
            height: 2px;
            transform: rotate(-10deg);
        }
        
        .deck-box.cracking .mystical-crack {
            opacity: 1;
            animation: crack-glow 1s ease-in-out infinite alternate;
        }
        
        @keyframes crack-glow {
            0% { 
                filter: brightness(1) drop-shadow(0 0 8px currentColor);
            }
            100% { 
                filter: brightness(2) drop-shadow(0 0 20px currentColor);
            }
        }
        
        /* DECK CONTENT */
        .deck-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: var(--gold);
            font-family: 'Orbitron', monospace;
        }
        
        .deck-logo {
            width: 200px;
            height: 200px;
            margin-bottom: 30px;
            background: transparent;
            border: none;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s ease;
            overflow: hidden;
        }
        
        .deck-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: brightness(0.9);
        }
        
        .deck-box.energy-building .deck-logo {
            animation: logo-energy 1s ease-in-out infinite alternate;
        }
        
        @keyframes logo-energy {
            0% { 
                filter: brightness(1.2) drop-shadow(0 0 15px var(--mystical-blue));
                transform: scale(1);
            }
            100% { 
                filter: brightness(2) drop-shadow(0 0 25px var(--energy-purple));
                transform: scale(1.05);
            }
        }
        
        /* CLICK HINT - ABSOLUTELY CENTERED */
        .click-hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1rem;
            animation: mystical-pulse-text 2s infinite;
            text-align: center;
            white-space: nowrap;
            color: var(--gold);
            font-family: 'Orbitron', monospace;
        }
        
        @keyframes mystical-pulse-text {
            0%, 100% { 
                opacity: 0.6; 
                text-shadow: 0 0 8px currentColor;
                transform: translateX(-50%) scale(1);
            }
            50% { 
                opacity: 1; 
                text-shadow: 0 0 20px currentColor, 0 0 30px var(--mystical-blue);
                transform: translateX(-50%) scale(1.02);
            }
        }
        
        /* PARTICLES */
        .mystical-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--mystical-blue);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1001;
            opacity: 0;
            box-shadow: 0 0 6px currentColor;
        }
        
        .energy-wave {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 0;
            height: 0;
            border: 3px solid var(--energy-purple);
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
            z-index: 1000;
        }
        
        .screen-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle, 
                rgba(255, 255, 255, 0.9) 0%, 
                rgba(0, 191, 255, 0.6) 30%, 
                rgba(138, 43, 226, 0.3) 60%, 
                transparent 100%);
            opacity: 0;
            pointer-events: none;
            z-index: 9999;
        }
        
        .card-burst {
            position: absolute;
            width: 20px;
            height: 30px;
            background: linear-gradient(145deg, var(--gold), var(--dark-gold));
            border-radius: 3px;
            opacity: 0;
            pointer-events: none;
            z-index: 1002;
            box-shadow: 0 0 8px var(--gold);
        }
        
        @keyframes particle-burst {
            0% {
                opacity: 1;
                transform: scale(0) rotate(0deg);
            }
            20% {
                opacity: 1;
                transform: scale(1.5) rotate(90deg);
            }
            80% {
                opacity: 0.8;
                transform: scale(1) rotate(270deg);
            }
            100% {
                opacity: 0;
                transform: scale(0) rotate(360deg);
            }
        }
        
        @keyframes energy-wave-expand {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            50% {
                opacity: 0.8;
            }
            100% {
                width: 600px;
                height: 600px;
                opacity: 0;
            }
        }
        
        @keyframes screen-flash-effect {
            0% { opacity: 0; }
            15% { opacity: 1; }
            35% { opacity: 0.8; }
            100% { opacity: 0; }
        }
        
        /* CARDS */
        .cards-container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }
        
        .cards-container.show {
            display: block;
        }
        
        .cards-grid {
            display: grid;
            gap: 30px;
            justify-content: center;
            padding: 20px 0;
        }
        
        @media (max-width: 768px) {
            .cards-grid {
                grid-template-columns: 1fr;
                max-width: 320px;
                margin: 0 auto;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1200px) {
            .cards-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1201px) {
            .cards-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        .trading-card {
            width: 300px;
            height: 450px;
            perspective: 1000px;
            cursor: pointer;
            justify-self: center;
            opacity: 0;
            transform: scale(0.1);
            transition: all 0.3s ease;
        }
        
        .trading-card.card-flying {
            animation: 
                card-fly-in 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards,
                card-spin 1.2s linear forwards;
        }
        
        @keyframes card-fly-in {
            0% {
                opacity: 1;
                transform: scale(0.1);
            }
            20% {
                transform: scale(0.4);
            }
            40% {
                transform: scale(0.7);
            }
            60% {
                transform: scale(0.9);
            }
            80% {
                transform: scale(1.05);
            }
            90% {
                transform: scale(1.1);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes card-spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        .trading-card.card-landed {
            opacity: 1;
            transform: scale(1);
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s ease;
            transform-style: preserve-3d;
        }
        
        .trading-card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: var(--border-radius);
            border: 1px solid var(--gold);
            background: linear-gradient(145deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.8);
        }
        
        .card-front {
            transform: rotateY(0deg);
        }
        
        .card-back {
            transform: rotateY(180deg);
        }
        
        .card-front::before, .card-back::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 8px;
            right: 8px;
            bottom: 8px;
            border: 1px solid var(--silver);
            border-radius: 6px;
            opacity: 0.8;
        }
        
        .front-container {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 60px;
            display: flex;
            flex-direction: column;
        }
        
        .card-header {
            background: linear-gradient(145deg, var(--secondary-dark) 0%, var(--primary-dark) 100%);
            border: 1px solid var(--gold);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 15px;
        }
        
        .persona-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.1rem;
            font-weight: 900;
            color: var(--dark-gold);
            text-transform: uppercase;
            text-align: center;
            line-height: 1.1;
        }
        
        .persona-title.long-title {
            font-size: 0.75rem;
            letter-spacing: 0.5px;
            line-height: 0.95;
        }
        
        .image-container {
            width: 100px;
            height: 100px;
            margin: 0 auto 15px auto;
            border: 1px solid var(--silver);
            border-radius: 8px;
            background: var(--secondary-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--silver);
            font-size: 0.8rem;
        }
        
        .stats-section {
            flex: 1;
            margin-bottom: 10px;
        }
        
        .stat-item {
            display: flex;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }
        
        .stat-label {
            font-weight: 700;
            color: var(--silver);
            width: 70px;
            flex-shrink: 0;
        }
        
        .stat-value {
            color: rgba(255, 255, 255, 0.9);
            flex: 1;
        }
        
        .quote-section {
            padding: 10px;
            border-top: 1px solid var(--silver);
            font-style: italic;
            color: var(--silver);
            font-size: 0.8rem;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
        }
        
        .back-container {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 110px;
            display: flex;
            flex-direction: column;
        }
        
        .back-title {
            font-family: 'Orbitron', monospace;
            font-size: 1rem;
            font-weight: 900;
            color: var(--dark-gold);
            margin-bottom: 15px;
            text-align: center;
            text-transform: uppercase;
        }
        
        .back-title.long-title {
            font-size: 0.75rem;
            letter-spacing: 0.5px;
            line-height: 0.95;
        }
        
        .info-section {
            margin-bottom: 15px;
        }
        
        .section-title {
            font-family: 'Orbitron', monospace;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--silver);
            margin-bottom: 5px;
            text-transform: uppercase;
        }
        
        .section-content {
            font-size: 0.8rem;
            line-height: 1.4;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .logo-space {
            position: absolute;
            bottom: 25px;
            left: 15px;
            right: 15px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .back-logo {
            width: 180px;
            height: auto;
            opacity: 0.8;
            max-height: 100px;
            object-fit: contain;
        }
        
        .mc-logo {
            position: absolute;
            bottom: 15px;
            right: 10px;
            width: 40px;
            height: 40px;
            z-index: 20;
        }
        
        .mc-logo-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .card-number {
            position: absolute;
            bottom: 15px;
            left: 15px;
            font-family: 'Orbitron', monospace;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--silver);
            background: rgba(0, 0, 0, 0.8);
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid var(--silver);
        }
        
        .flip-hint {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: rgba(192, 192, 192, 0.6);
            font-family: 'Orbitron', monospace;
        }
        
        .next-button-container {
            display: none;
            justify-content: center;
            margin: 50px 0 30px 0;
        }
        
        .next-button-container.show {
            display: flex;
        }
        
        .next-btn {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            padding: 15px 40px;
            border: 2px solid var(--gold);
            background: linear-gradient(145deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            color: var(--gold);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            text-decoration: none;
            font-size: 1rem;
        }
        
        .next-btn:hover {
            background: linear-gradient(145deg, var(--gold) 0%, var(--dark-gold) 100%);
            color: var(--primary-dark);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    
    <div class="header">
        <h1 class="main-title">Ultra Keith Personas</h1>
        <p class="subtitle">Trading Card Collection - First 12 Cards</p>
    </div>
    
    <div class="deck-container" id="deckContainer">
        <div class="deck-box" id="deckBox">
            <!-- MYSTICAL CRACKS -->
            <div class="mystical-crack crack-1"></div>
            <div class="mystical-crack crack-2"></div>
            <div class="mystical-crack crack-3"></div>
            <div class="mystical-crack crack-4"></div>
            
            <!-- DECK CONTENT -->
            <div class="deck-content">
                <div class="deck-logo">
                    <img src="logoback.png" alt="Ultra Keith Logo">
                </div>
            </div>
            
            <!-- CLICK HINT - SEPARATE ELEMENT -->
            <div class="click-hint">Click to Open the Portal</div>
        </div>
    </div>
    
    <div class="cards-container" id="cardsContainer">
        <div class="cards-grid" id="cardsGrid">
        </div>
    </div>
    
    <div class="next-button-container" id="nextButtonContainer">
        <a href="#" class="next-btn">Next →</a>
    </div>
    
    <script>
        console.log('🚀 Starting Ultra Keith Personas...');
        
        // CONFIGURATION
        var CONFIG = {
            ANIMATION_SPEEDS: {
                PORTAL_PHASES: [0, 600, 1200, 1600, 2200, 3000],
                CARD_FLIGHT: 1200,
                CARD_LAUNCH_INTERVAL: 100,
                PARTICLE_BURST: 2000,
                ENERGY_WAVE: 1500,
                SCREEN_FLASH: 2000
            },
            CARD_LIMITS: {
                LONG_TITLE_THRESHOLD: 20
            },
            PARTICLE_COUNTS: {
                MYSTICAL_PARTICLES: 60,
                ENERGY_WAVES: 6,
                CARD_BURSTS: 40
            }
        };
        
        // PERSONA DATA
        var personasData = [
            {
                number: "001", name: "Activity", year: "1984", era: "old", age: "20 (young breakdancer age)", origin: "NYC",
                likes: "Breakdancing, popping and rocking", dislikes: "Sitting still, slow music",
                quote: "I Pop it like that, Rock it like that...",
                biography: "Keith's first documented persona from the NYC Breakers breakdancing crew. Activity represents the foundation of Keith's character creation, emerging from early hip-hop culture before rap dominated.",
                debut: "NYC Breakers (1984) - Pre-rap career", themes: "Breakdancing culture, early hip-hop foundation, character creation origins"
            },
            {
                number: "002", name: "Kool Keith", year: "1988", era: "old", age: "25", origin: "Bronx, NY",
                likes: "Porn, Animals", dislikes: "Girls who are not innovative that don't like to take pictures",
                quote: "I'm the master of the game, all the girls know my name.",
                biography: "Keith's primary rap persona. The revolutionary MC who broke all rules with abstract wordplay, sci-fi concepts, and unconventional rhyme patterns that influenced generations.",
                debut: "Critical Beatdown (1988) with Ultramagnetic MCs", themes: "Complex rhymes, abstract imagery, sci-fi concepts, innovative flow"
            },
            {
                number: "003", name: "MC Ultra", year: "1988", era: "old", age: "24 (pre-Kool Keith maturity)", origin: "Bronx",
                likes: "Echo chambers, reverb effects, early sampling", dislikes: "Wack MCs, digital delays",
                quote: "MC Ultra sound, echo through your town...",
                biography: "Early Bronx-based persona representing Keith's foundational MC identity during the late 1980s Ultramagnetic era.",
                debut: "Late 1980s (Ultramagnetic era)", themes: "Bronx identity, early MC development, Ultramagnetic foundation"
            },
            {
                number: "004", name: "Dr. Sperm", year: "1988", era: "old", age: "32 (medical school graduate age)", origin: "Laboratory test tube",
                likes: "Early rap experimentation, reproductive science, petri dishes", dislikes: "Birth control, sterile environments",
                quote: "Dr. Sperm in the house, making life from scratch...",
                biography: "One of Keith's earliest aliases representing his experimental approach to rap persona development and foreshadowing his later medical-themed characters.",
                debut: "Early career alias (1988)", themes: "Early rap identity, medical theme precursor, experimental persona development"
            },
            {
                number: "005", name: "Exotron Geiger Counter One Plus Megatron", year: "1989", era: "old", age: "10,000 (robot years)", origin: "Cybertron (Scientific laboratory division)",
                likes: "Complex scientific names, radio appearances, Megatron references, radiation detection", dislikes: "Simple identities, Autobots",
                quote: "Exotron readings off the meter, Geiger Counter be the leader...",
                biography: "Keith's experimental radio persona combining scientific complexity with Transformers references. Represents early character experimentation on Marley Marl's influential radio show.",
                debut: "Marley Marl In Control radio show (1989), Critical Beatdown (1988)", themes: "Scientific complexity, Transformers reference, radio culture, early experimentation"
            },
            {
                number: "006", name: "Exotron Geiger Counter One Gamma Plus Sequencer", year: "1989", era: "old", age: "10,001 (upgraded model)", origin: "Cybertron (Advanced Scientific Division)",
                likes: "Complex scientific names, radio appearances, sequencer technology, gamma radiation", dislikes: "Simple identities, analog equipment",
                quote: "Gamma sequences activate, Exotron don't hesitate...",
                biography: "Extended version of Keith's scientific radio persona, emphasizing sequencer technology and complex naming conventions that became his trademark.",
                debut: "Marley Marl In Control radio show (1989) - longer version", themes: "Scientific complexity, sequencer technology, radio experimentation"
            },
            {
                number: "007", name: "Big Willie Smith", year: "1995", era: "old", age: "22", origin: "Uptown",
                likes: "Blondes, Cold Duck, big status, Beat Terrorists", dislikes: "Landlords, Antennas",
                quote: "Keep it real, represent what? My nuts!...",
                biography: "Keith's street credibility persona from his Beat Terrorists EP era, representing raw uptown attitude and early independent releases before major label success.",
                debut: "Big Willie Smith EP (1995) with Beat Terrorists", themes: "Street credibility, representing, early EP work, independent releases"
            },
            {
                number: "008", name: "X-74", year: "1995", era: "old", age: "74 (the number in his name)", origin: "Cenobite dimension",
                likes: "Dope verses, mathematical equations, X-variables", dislikes: "Wack rhymes, solved equations",
                quote: "X marks the spot where the dope verse drops...",
                biography: "Keith's Cenobites collaboration persona, exploring abstract rhyming and philosophical concepts within the underground collective's experimental approach.",
                debut: "Cenobites EP - \"Kick a Dope Verse\" (1995)", themes: "Abstract rhyming, cenobite philosophy, underground collaboration"
            },
            {
                number: "009", name: "Poppa Large", year: "1992", era: "old", age: "35", origin: "Bronx, NY",
                likes: "Daredevil videos, Spinning around in circles", dislikes: "Quicksand, Soft Pretzels",
                quote: "I'm Poppa Large, Big Shot On The East Coast",
                biography: "Keith's East Coast supremacy persona, emphasizing regional pride and daredevil attitude during Ultramagnetic's funk era expansion.",
                debut: "Funk Your Head Up (1992) with Ultramagnetic MCs", themes: "East Coast supremacy, braggadocio, daredevil attitude"
            },
            {
                number: "010", name: "Rhythm X", year: "1992", era: "old", age: "30", origin: "BX, New York",
                likes: "Mae West, Gastronomy", dislikes: "Traffic, Soft Cauliflower",
                quote: "Rhythm X roller, my style gets critical, Brain connects, computer rhymes get physical.",
                biography: "Keith's rhythmic complexity persona, combining abstract wordplay with culinary interests and classic Hollywood references, later featured by The Prodigy.",
                debut: "Funk Your Head Up (1992) with Ultramagnetic MCs - \"Funk Radio\"", themes: "Rhythmic complexity, abstract wordplay, gastronomy, crossover appeal"
            },
            {
                number: "011", name: "The X", year: "1992", era: "mid", age: "Infinite (X equals infinity)", origin: "Algebraic dimension",
                likes: "Four Horsemen imagery, mathematical mysteries", dislikes: "Being solved, simple equations",
                quote: "The X factor remains unsolved...",
                biography: "Mysterious X-identity connected to Ultramagnetic's Four Horsemen concept, representing Keith's exploration of apocalyptic and biblical themes.",
                debut: "Ultramagnetic MC's Four Horsemen LP (inside cover) (1992)", themes: "X-identity, Ultramagnetic era, apocalyptic imagery"
            },
            {
                number: "012", name: "X-Caliber", year: "1992", era: "mid", age: "1000 (medieval sword age)", origin: "Stone (where Arthur pulled the sword)",
                likes: "Funk radio, sword imagery, medieval combat", dislikes: "Rust, modern weapons",
                quote: "X-Caliber slice through funk like butter...",
                biography: "Sword-themed persona combining medieval weaponry with funk radio culture, representing Keith's ability to blend historical references with contemporary hip-hop.",
                debut: "Funk Your Head Up (1992) - \"Funk Radio\"", themes: "Sword/weapon imagery, funk radio culture, medieval hip-hop fusion"
            }
        ];
        
        var deckOpened = false;
        
        // UTILITY FUNCTIONS
        function safeRemoveElement(element) {
            if (element && element.parentNode) {
                element.parentNode.removeChild(element);
            }
        }
        
        function addClassSafely(element, className) {
            if (element && element.classList) {
                element.classList.add(className);
            }
        }
        
        function removeClassSafely(element, className) {
            if (element && element.classList) {
                element.classList.remove(className);
            }
        }
        
        // CARD GENERATION
        function generateCards() {
            console.log('📋 Generating cards...');
            var container = document.getElementById('cardsGrid');
            
            for (var i = 0; i < personasData.length; i++) {
                var persona = personasData[i];
                var isLongTitle = persona.name.length > CONFIG.CARD_LIMITS.LONG_TITLE_THRESHOLD;
                var card = document.createElement('div');
                card.className = 'trading-card';
                card.innerHTML = '<div class="card-inner">' +
                    '<div class="card-front">' +
                        '<div class="front-container">' +
                            '<div class="card-header">' +
                                '<h1 class="persona-title ' + (isLongTitle ? 'long-title' : '') + '">' + persona.name + '</h1>' +
                            '</div>' +
                            '<div class="image-container">IMG</div>' +
                            '<div class="stats-section">' +
                                '<div class="stat-item">' +
                                    '<span class="stat-label">Age:</span>' +
                                    '<span class="stat-value">' + persona.age + '</span>' +
                                '</div>' +
                                '<div class="stat-item">' +
                                    '<span class="stat-label">Origin:</span>' +
                                    '<span class="stat-value">' + persona.origin + '</span>' +
                                '</div>' +
                                '<div class="stat-item">' +
                                    '<span class="stat-label">Likes:</span>' +
                                    '<span class="stat-value">' + persona.likes + '</span>' +
                                '</div>' +
                                '<div class="stat-item">' +
                                    '<span class="stat-label">Dislikes:</span>' +
                                    '<span class="stat-value">' + persona.dislikes + '</span>' +
                                '</div>' +
                            '</div>' +
                            '<div class="quote-section">"' + persona.quote + '"</div>' +
                        '</div>' +
                        '<div class="mc-logo">' +
                            '<img src="mc.png" alt="MC" class="mc-logo-img">' +
                        '</div>' +
                        '<div class="flip-hint">Click to flip</div>' +
                        '<div class="card-number">#' + persona.number + '</div>' +
                    '</div>' +
                    '<div class="card-back">' +
                        '<div class="back-container">' +
                            '<h2 class="back-title ' + (isLongTitle ? 'long-title' : '') + '">' + persona.name + ' (' + persona.year + ')</h2>' +
                            '<div class="info-section">' +
                                '<h3 class="section-title">Biography</h3>' +
                                '<div class="section-content">' + persona.biography + '</div>' +
                            '</div>' +
                            '<div class="info-section">' +
                                '<h3 class="section-title">Debut</h3>' +
                                '<div class="section-content">' + persona.debut + '</div>' +
                            '</div>' +
                            '<div class="info-section">' +
                                '<h3 class="section-title">Key Themes</h3>' +
                                '<div class="section-content">' + persona.themes + '</div>' +
                            '</div>' +
                        '</div>' +
                        '<div class="logo-space">' +
                            '<img src="logoback.png" alt="Ultra Keith Logo" class="back-logo">' +
                        '</div>' +
                        '<div class="mc-logo">' +
                            '<img src="mc.png" alt="MC" class="mc-logo-img">' +
                        '</div>' +
                        '<div class="card-number">#' + persona.number + '</div>' +
                    '</div>' +
                '</div>';
                
                card.addEventListener('click', function() {
                    var personaName = this.querySelector('.persona-title').textContent;
                    console.log('🃏 Flipping card: ' + personaName);
                    this.classList.toggle('flipped');
                });
                
                container.appendChild(card);
            }
            
            console.log('✅ Generated ' + personasData.length + ' cards');
        }
        
        // ANIMATION FUNCTIONS
        function createMysticalParticles(container, count) {
            if (!container) return;
            count = count || CONFIG.PARTICLE_COUNTS.MYSTICAL_PARTICLES;
            
            for (var i = 0; i < count; i++) {
                setTimeout(function(index) {
                    return function() {
                        var particle = document.createElement('div');
                        particle.className = 'mystical-particle';
                        
                        var centerX = container.offsetWidth / 2;
                        var centerY = container.offsetHeight / 2;
                        var angle = (Math.PI * 2 * index) / count;
                        var radius = 30 + Math.random() * 100;
                        
                        particle.style.left = (centerX + Math.cos(angle) * radius) + 'px';
                        particle.style.top = (centerY + Math.sin(angle) * radius) + 'px';
                        
                        var colors = ['var(--mystical-blue)', 'var(--energy-purple)', 'var(--plasma-pink)', 'var(--gold)'];
                        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                        particle.style.animation = 'particle-burst 2s ease-out forwards';
                        
                        container.appendChild(particle);
                        
                        setTimeout(function() {
                            safeRemoveElement(particle);
                        }, CONFIG.ANIMATION_SPEEDS.PARTICLE_BURST);
                    };
                }(i), i * 30);
            }
        }
        
        function createEnergyWaves(container, count) {
            if (!container) return;
            count = count || CONFIG.PARTICLE_COUNTS.ENERGY_WAVES;
            
            for (var i = 0; i < count; i++) {
                setTimeout(function() {
                    var wave = document.createElement('div');
                    wave.className = 'energy-wave';
                    wave.style.animation = 'energy-wave-expand 1.5s ease-out forwards';
                    container.appendChild(wave);
                    
                    setTimeout(function() {
                        safeRemoveElement(wave);
                    }, CONFIG.ANIMATION_SPEEDS.ENERGY_WAVE);
                }, i * 200);
            }
        }
        
        function createScreenFlash() {
            var flash = document.createElement('div');
            flash.className = 'screen-flash';
            flash.style.animation = 'screen-flash-effect ' + (CONFIG.ANIMATION_SPEEDS.SCREEN_FLASH / 1000) + 's ease-out forwards';
            document.body.appendChild(flash);
            
            setTimeout(function() {
                safeRemoveElement(flash);
            }, CONFIG.ANIMATION_SPEEDS.SCREEN_FLASH);
        }
        
        function createCardBurst(container, count) {
            if (!container) return;
            count = count || CONFIG.PARTICLE_COUNTS.CARD_BURSTS;
            
            for (var i = 0; i < count; i++) {
                setTimeout(function() {
                    var cardBurst = document.createElement('div');
                    cardBurst.className = 'card-burst';
                    
                    var centerX = container.offsetWidth / 2;
                    var centerY = container.offsetHeight / 2;
                    cardBurst.style.left = (centerX + (Math.random() - 0.5) * 200) + 'px';
                    cardBurst.style.top = (centerY + (Math.random() - 0.5) * 200) + 'px';
                    
                    var moveX = (Math.random() - 0.5) * 400;
                    var moveY = (Math.random() - 0.5) * 400;
                    cardBurst.style.transform = 'translate(' + moveX + 'px, ' + moveY + 'px) rotate(' + (Math.random() * 360) + 'deg)';
                    cardBurst.style.animation = 'particle-burst 2.5s ease-out forwards';
                    
                    container.appendChild(cardBurst);
                    
                    setTimeout(function() {
                        safeRemoveElement(cardBurst);
                    }, 2500);
                }, i * 50);
            }
        }
        
        // CARD FLIGHT ANIMATION
        function animateCardsFromDeck() {
            console.log('🎆 Animating cards flying from deck...');
            var cards = document.querySelectorAll('.trading-card');
            
            for (var i = 0; i < cards.length; i++) {
                var card = cards[i];
                
                setTimeout(function(index, cardElement) {
                    return function() {
                        var personaName = cardElement.querySelector('.persona-title').textContent;
                        console.log('🃏 Launching card ' + (index + 1) + ': ' + personaName);
                        addClassSafely(cardElement, 'card-flying');
                        
                        setTimeout(function() {
                            removeClassSafely(cardElement, 'card-flying');
                            addClassSafely(cardElement, 'card-landed');
                            console.log('✅ Card ' + (index + 1) + ' landed!');
                        }, CONFIG.ANIMATION_SPEEDS.CARD_FLIGHT);
                    };
                }(i, card), i * CONFIG.ANIMATION_SPEEDS.CARD_LAUNCH_INTERVAL);
            }
        }
        
        // MAIN DECK SETUP
        function setupDeck() {
            console.log('🎮 Setting up mystical deck...');
            var deckBox = document.getElementById('deckBox');
            var deckContainer = document.getElementById('deckContainer');
            var cardsContainer = document.getElementById('cardsContainer');
            var nextButton = document.getElementById('nextButtonContainer');
            
            if (!deckBox) {
                console.error('❌ Deck box not found!');
                return;
            }
            
            console.log('✅ Deck box found:', deckBox);
            
            deckBox.addEventListener('mouseenter', function() {
                if (!deckOpened) {
                    console.log('🌟 Mystical aura activated...');
                    addClassSafely(deckBox, 'mystical-hover');
                }
            });
            
            deckBox.addEventListener('mouseleave', function() {
                removeClassSafely(deckBox, 'mystical-hover');
            });
            
            deckBox.addEventListener('click', function() {
                console.log('🎯 MYSTICAL DECK CLICKED!');
                
                if (!deckOpened) {
                    console.log('🎭 MYSTICAL PORTAL OPENING SEQUENCE INITIATED...');
                    deckOpened = true;
                    
                    removeClassSafely(deckBox, 'mystical-hover');
                    
                    console.log('⚡ Phase 1: Mystical cracks appearing...');
                    addClassSafely(deckBox, 'cracking');
                    addClassSafely(deckBox, 'energy-building');
                    
                    setTimeout(function() {
                        console.log('🌊 Phase 2: Energy waves expanding...');
                        createEnergyWaves(deckContainer);
                    }, CONFIG.ANIMATION_SPEEDS.PORTAL_PHASES[1]);
                    
                    setTimeout(function() {
                        console.log('💫 Phase 3: Mystical particle explosion!');
                        createMysticalParticles(deckContainer);
                    }, CONFIG.ANIMATION_SPEEDS.PORTAL_PHASES[2]);
                    
                    setTimeout(function() {
                        console.log('🃏 Phase 4: Card burst sequence!');
                        createCardBurst(deckContainer);
                    }, CONFIG.ANIMATION_SPEEDS.PORTAL_PHASES[3]);
                    
                    setTimeout(function() {
                        console.log('⚡ Phase 5: Reality-bending screen flash!');
                        createScreenFlash();
                    }, CONFIG.ANIMATION_SPEEDS.PORTAL_PHASES[4]);
                    
                    setTimeout(function() {
                        console.log('✨ Phase 6: Portal opened - cards flying out!');
                        addClassSafely(deckContainer, 'hidden');
                        addClassSafely(cardsContainer, 'show');
                        addClassSafely(nextButton, 'show');
                        
                        setTimeout(function() {
                            animateCardsFromDeck();
                        }, 200);
                        
                        console.log('🎮 Card interaction system will activate after flight!');
                    }, CONFIG.ANIMATION_SPEEDS.PORTAL_PHASES[5]);
                } else {
                    console.log('⚠️ Portal already opened');
                }
            });
            
            console.log('✅ Mystical deck setup complete');
        }
        
        // INITIALIZATION
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎬 Page loaded - initializing...');
            
            try {
                generateCards();
                setupDeck();
                console.log('🎉 Ready! Click the mystical deck to open the portal!');
            } catch (error) {
                console.error('❌ Initialization failed:', error);
            }
        });
    </script>
    
</body>
</html>
