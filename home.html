<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEST - Simple Carousel</title>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            padding: 2rem;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: #222;
            padding: 2rem;
            border-radius: 10px;
        }
        
        h1 {
            text-align: center;
            color: #DAB547;
            margin-bottom: 2rem;
        }
        
        /* SIMPLE CAROUSEL CONTAINER */
        .carousel {
            position: relative;
            width: 100%;
            height: 400px;
            overflow: hidden;
            border: 2px solid #DAB547;
            border-radius: 10px;
            background: #333;
        }
        
        /* SLIDER TRACK THAT MOVES */
        .slider {
            display: flex;
            height: 100%;
            transition: transform 0.6s ease-in-out;
        }
        
        /* INDIVIDUAL ALBUM SLIDES */
        .slide {
            min-width: 100%; /* Mobile: 1 album takes full width */
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
            background: #444;
            border-right: 1px solid #555;
        }
        
        .slide img {
            width: 200px;
            height: 200px;
            border-radius: 8px;
            margin-bottom: 1rem;
            border: 2px solid #DAB547;
        }
        
        .slide h3 {
            color: #DAB547;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .slide p {
            color: #ccc;
            font-size: 1rem;
        }
        
        /* DESKTOP: 2 ALBUMS SIDE BY SIDE */
        @media (min-width: 769px) {
            .slide {
                min-width: 50%; /* Desktop: each slide is 50% so 2 are visible */
                flex-direction: row;
                text-align: left;
                gap: 1.5rem;
            }
            
            .slide img {
                width: 150px;
                height: 150px;
                margin-bottom: 0;
                flex-shrink: 0;
            }
            
            .slide-info {
                display: flex;
                flex-direction: column;
                justify-content: center;
            }
        }
        
        /* NAVIGATION BUTTONS */
        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: #DAB547;
            color: #000;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 10;
        }
        
        .prev {
            left: 10px;
        }
        
        .next {
            right: 10px;
        }
        
        .nav-btn:hover {
            background: #E8C547;
        }
        
        /* STATUS DISPLAY */
        .status {
            margin-top: 1rem;
            text-align: center;
            font-family: monospace;
            color: #DAB547;
        }
        
        .controls {
            margin-top: 1rem;
            text-align: center;
        }
        
        .controls button {
            background: #DAB547;
            color: #000;
            border: none;
            padding: 0.5rem 1rem;
            margin: 0 0.5rem;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>CAROUSEL TEST - Fixed Smooth Backward</h1>
        
        <div class="carousel">
            <div class="slider" id="slider">
                <!-- DUPLICATE SLIDE 4 & 5 AT BEGINNING FOR SMOOTH BACKWARD -->
                <div class="slide">
                    <img src="https://via.placeholder.com/200x200/8E44AD/fff?text=ALBUM+4" alt="Album 4">
                    <div class="slide-info">
                        <h3>Aponia</h3>
                        <p>Awol One & Kool Keith</p>
                    </div>
                </div>
                
                <div class="slide">
                    <img src="https://via.placeholder.com/200x200/F39C12/000?text=ALBUM+5" alt="Album 5">
                    <div class="slide-info">
                        <h3>World Area</h3>
                        <p>Kool Keith</p>
                    </div>
                </div>
                
                <!-- ORIGINAL 5 SLIDES -->
                <div class="slide">
                    <img src="https://via.placeholder.com/200x200/DAB547/000?text=ALBUM+1" alt="Album 1">
                    <div class="slide-info">
                        <h3>Karpenters</h3>
                        <p>Kool Keith</p>
                    </div>
                </div>
                
                <div class="slide">
                    <img src="https://via.placeholder.com/200x200/E74C3C/fff?text=ALBUM+2" alt="Album 2">
                    <div class="slide-info">
                        <h3>Everybody Eats!</h3>
                        <p>Stress Eater</p>
                    </div>
                </div>
                
                <div class="slide">
                    <img src="https://via.placeholder.com/200x200/27AE60/fff?text=ALBUM+3" alt="Album 3">
                    <div class="slide-info">
                        <h3>Bandoleros</h3>
                        <p>Lynx 196.9</p>
                    </div>
                </div>
                
                <div class="slide">
                    <img src="https://via.placeholder.com/200x200/8E44AD/fff?text=ALBUM+4" alt="Album 4">
                    <div class="slide-info">
                        <h3>Aponia</h3>
                        <p>Awol One & Kool Keith</p>
                    </div>
                </div>
                
                <div class="slide">
                    <img src="https://via.placeholder.com/200x200/F39C12/000?text=ALBUM+5" alt="Album 5">
                    <div class="slide-info">
                        <h3>World Area</h3>
                        <p>Kool Keith</p>
                    </div>
                </div>
                
                <!-- DUPLICATE SLIDE 1 & 2 AT END FOR SMOOTH FORWARD -->
                <div class="slide">
                    <img src="https://via.placeholder.com/200x200/DAB547/000?text=ALBUM+1" alt="Album 1">
                    <div class="slide-info">
                        <h3>Karpenters</h3>
                        <p>Kool Keith</p>
                    </div>
                </div>
                
                <div class="slide">
                    <img src="https://via.placeholder.com/200x200/E74C3C/fff?text=ALBUM+2" alt="Album 2">
                    <div class="slide-info">
                        <h3>Everybody Eats!</h3>
                        <p>Stress Eater</p>
                    </div>
                </div>
            </div>
            
            <button class="nav-btn prev" id="prevBtn">❮</button>
            <button class="nav-btn next" id="nextBtn">❯</button>
        </div>
        
        <div class="status" id="status">
            Album 1/5 - Ready for smooth forward/backward test
        </div>
        
        <div class="controls">
            <button onclick="startTest()">Start Forward-Only Auto</button>
            <button onclick="stopTest()">Stop</button>
            <button onclick="testNext()">Manual Next (resumes auto in 3s)</button>
            <button onclick="testPrev()">Manual Prev (resumes auto in 3s)</button>
        </div>
    </div>

    <script>
        // SIMPLE TEST CAROUSEL - FIXED SMOOTH BACKWARD
        let currentSlide = 2; // Start at position 2 (which shows Album 1)
        const totalSlides = 5; // Logical slides (user sees 5)
        const startPosition = 2; // Where the real slides start
        let autoTimer = null;
        let resumeTimer = null;
        let isDesktop = window.innerWidth > 768;
        let isAutoPaused = false;
        
        const slider = document.getElementById('slider');
        const status = document.getElementById('status');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        
        // MOVE TO SPECIFIC SLIDE
        function goToSlide(slideIndex) {
            // Calculate how far to move
            let movePercent;
            if (isDesktop) {
                movePercent = slideIndex * 50;
            } else {
                movePercent = slideIndex * 100;
            }
            
            slider.style.transform = `translateX(-${movePercent}%)`;
            
            // Calculate which logical album we're showing
            const adjustedIndex = slideIndex - startPosition;
            const logicalAlbum = ((adjustedIndex % totalSlides) + totalSlides) % totalSlides + 1;
            status.textContent = `Album ${logicalAlbum}/5 - Position ${slideIndex} - ${isDesktop ? 'Desktop' : 'Mobile'} - ${isAutoPaused ? 'PAUSED' : 'AUTO'}`;
            
            console.log(`Moved to position ${slideIndex} (Album ${logicalAlbum})`);
        }
        
        // CLEAR ALL TIMERS
        function clearAllTimers() {
            if (autoTimer) {
                clearInterval(autoTimer);
                autoTimer = null;
            }
            if (resumeTimer) {
                clearTimeout(resumeTimer);
                resumeTimer = null;
            }
        }
        
        // START AUTO-ADVANCE
        function startAutoAdvance() {
            if (autoTimer) return; // Don't start if already running
            
            autoTimer = setInterval(() => {
                if (!isAutoPaused) {
                    autoMoveForward();
                }
            }, 3000);
            
            console.log('Auto-advance timer started');
        }
        
        // AUTO MOVE FORWARD (used by timer)
        function autoMoveForward() {
            currentSlide++;
            
            // If we reach the end duplicates, jump back to start
            if (currentSlide >= startPosition + totalSlides) {
                goToSlide(currentSlide);
                setTimeout(() => {
                    slider.style.transition = 'none';
                    currentSlide = startPosition;
                    goToSlide(currentSlide);
                    setTimeout(() => {
                        slider.style.transition = 'transform 0.6s ease-in-out';
                    }, 50);
                }, 600);
            } else {
                goToSlide(currentSlide);
            }
            
            console.log(`AUTO: Moved forward to position ${currentSlide}`);
        }
        
        // START TEST - MAIN FUNCTION
        function startTest() {
            clearAllTimers();
            isAutoPaused = false;
            currentSlide = startPosition; // Start at Album 1
            goToSlide(currentSlide);
            
            console.log('TEST STARTED - waiting 3 seconds then auto-advance');
            
            setTimeout(() => {
                startAutoAdvance();
            }, 3000);
        }
        
        // STOP TEST
        function stopTest() {
            clearAllTimers();
            isAutoPaused = true;
            console.log('Auto-advance stopped');
        }
        
        // MANUAL NEXT
        function testNext() {
            clearAllTimers();
            isAutoPaused = true;
            
            // Move forward like auto
            currentSlide++;
            if (currentSlide >= startPosition + totalSlides) {
                goToSlide(currentSlide);
                setTimeout(() => {
                    slider.style.transition = 'none';
                    currentSlide = startPosition;
                    goToSlide(currentSlide);
                    setTimeout(() => {
                        slider.style.transition = 'transform 0.6s ease-in-out';
                    }, 50);
                }, 600);
            } else {
                goToSlide(currentSlide);
            }
            
            console.log('MANUAL: Next (auto resumes in 3s)');
            
            // Resume auto after 3 seconds
            resumeTimer = setTimeout(() => {
                isAutoPaused = false;
                startAutoAdvance();
                console.log('Auto resumed after manual next');
            }, 3000);
        }
        
        // MANUAL PREVIOUS - NOW SMOOTH!
        function testPrev() {
            clearAllTimers();
            isAutoPaused = true;
            
            currentSlide--;
            
            // If we go before the start, jump to the end duplicates
            if (currentSlide < startPosition) {
                goToSlide(currentSlide);
                setTimeout(() => {
                    slider.style.transition = 'none';
                    currentSlide = startPosition + totalSlides - 1; // Jump to last real slide
                    goToSlide(currentSlide);
                    setTimeout(() => {
                        slider.style.transition = 'transform 0.6s ease-in-out';
                    }, 50);
                }, 600);
            } else {
                goToSlide(currentSlide);
            }
            
            console.log('MANUAL: Prev (auto resumes in 3s)');
            
            // Resume auto after 3 seconds
            resumeTimer = setTimeout(() => {
                isAutoPaused = false;
                startAutoAdvance();
                console.log('Auto resumed after manual prev');
            }, 3000);
        }
        
        // BUTTON EVENT LISTENERS
        nextBtn.addEventListener('click', testNext);
        prevBtn.addEventListener('click', testPrev);
        
        // HANDLE RESIZE
        window.addEventListener('resize', () => {
            const wasDesktop = isDesktop;
            isDesktop = window.innerWidth > 768;
            
            if (wasDesktop !== isDesktop) {
                goToSlide(currentSlide); // Recalculate position
                console.log(`Layout changed to ${isDesktop ? 'desktop' : 'mobile'}`);
            }
        });
        
        // INITIALIZE
        document.addEventListener('DOMContentLoaded', () => {
            goToSlide(startPosition); // Show first album
            console.log('Test carousel initialized');
        });
    </script>
</body>
</html>
