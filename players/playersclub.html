<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Players Club - Kool Keith</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation matching home.html structure -->
    <nav class="nav" role="navigation">
        <div class="nav-container">
            <a href="../home.html" class="nav-logo">
                <img src="../koolkeithmainlogo.png" alt="Kool Keith Home" onerror="this.style.display='none'">
            </a>
            
            <div class="nav-right">
                <ul class="nav-menu" id="navMenu">
                    <li><a href="../music/music.html">Music</a></li>
                    <li><a href="../bio.html">Biography</a></li>
                    <li><a href="../tour.html">Tour</a></li>
                    <li><a href="https://ultrakeithdotcom.blogspot.com/">News</a></li>
                    <li><a href="../shop.html">Store</a></li>
                    <li><a href="#" style="color: var(--keith-gold); font-weight: bold;">Players Club</a></li>
                </ul>
                
                <button class="audio-toggle" id="audioToggle" aria-label="Toggle background audio">
                    <span class="audio-icon" id="audioIcon">üîä</span>
                    <span class="audio-text" id="audioText">Audio On</span>
                </button>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle mobile menu">‚ò∞</button>
            </div>
        </div>
    </nav>

    <div class="main-content" id="mainContent">
        <!-- ENTRANCE SCENE -->
        <div class="scene entrance-scene active" id="entranceScene">
            <div class="club-sign">the players club</div>
            <div class="entrance-container">
                <!-- CLUB DOOR -->
                <img src="photos/club-door.jpg" alt="Club Door" class="club-door" id="clubDoor"
                     onerror="this.style.display='none'; document.getElementById('doorFallback').style.display='block';">
                <div class="door-fallback" id="doorFallback" style="display:none;">
                    <div style="position:absolute; top:15%; left:50%; transform:translateX(-50%); width:60%; height:25%; background:rgba(0,0,0,0.8); border:2px solid var(--keith-gold); border-radius:8px;"></div>
                    <div style="position:absolute; right:15px; top:50%; transform:translateY(-50%); width:12px; height:30px; background:var(--keith-gold); border-radius:6px;"></div>
                </div>
                
                <!-- SECURITY KEYPAD -->
                <div class="keypad-fallback" onclick="showPinPad()">
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">üî¢</div>
                    <div>PIN</div>
                </div>
            </div>
        </div>
        
        <!-- BOUNCER SCENE -->
        <div class="scene bouncer-scene" id="bouncerScene">
            <div class="bouncer-container">
                <img src="photos/bouncer.jpg" alt="Bouncer" class="bouncer-avatar"
                     onerror="this.style.display='none'; document.getElementById('bouncerFallback').style.display='flex';">
                <div class="bouncer-avatar" id="bouncerFallback" style="display:none;">üë®‚Äçüíº</div>
                <h2 class="bouncer-title">Hey there</h2>
                <p style="font-size: 1.2rem; margin-bottom: 25px;">Keith was expecting you.</p>
                <p style="margin-bottom: 25px; opacity: 0.8;">Head over to the cashier to get your setup.</p>
                <button class="btn" onclick="goToCashier()">Continue ‚Üí</button>
            </div>
        </div>

        <!-- CASHIER SCENE -->
        <div class="scene cashier-scene" id="cashierScene">
            <div class="cashier-window">
                <img src="cashier.png" alt="Cashier" class="cashier-avatar"
                     onerror="this.style.display='none'; document.getElementById('cashierFallback').style.display='flex';">
                <div class="cashier-avatar" id="cashierFallback" style="display:none;">üë©‚Äçüíº</div>
                <h2 class="cashier-title">Welcome!</h2>
                <p style="margin-bottom: 20px;">What's your name?</p>
                <input type="text" class="name-input" id="playerNameInput" placeholder="Enter your name" maxlength="20">
                <div class="gift-items">
                    <div class="gift-item">
                        <div class="gift-icon">üí∞</div>
                        <div class="gift-label">500 Chips</div>
                    </div>
                    <div class="gift-item">
                        <img src="phone.png" alt="Phone" class="gift-icon"
                             onerror="this.style.display='none'; document.getElementById('phoneFallback').style.display='flex';">
                        <div class="gift-icon" id="phoneFallback" style="display:none;">üì±</div>
                        <div class="gift-label">Keith's Phone<br>(AI Chat)</div>
                    </div>
                </div>
                <p style="margin: 25px 0; font-size: 0.9rem; opacity: 0.8;">Keith left these for you. Enjoy your VIP experience!</p>
                <button class="btn" onclick="enterVIPBooth()">Enter VIP Booth</button>
            </div>
        </div>
        
        <!-- VIP BOOTH SCENE -->
        <div class="scene booth-scene" id="boothScene">
            <div class="booth-header">
                <div class="club-sign">the players club</div>
            </div>
            <div class="casino-room">
                <div class="room-slots" onclick="loadGame('slots')" title="Professional RTP 92% Slots">
                    <img src="slots.png" alt="Slot Machines"
                         onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=&quot;font-size:4rem; cursor:pointer;&quot; onclick=&quot;loadGame(\'slots\')&quot; title=&quot;Professional RTP 92% Slots&quot;>üé∞</div>';">
                </div>
                <div class="room-dice" onclick="loadGame('ceelo')" title="Real Cee-Lo Dice Game">
                    <img src="456.png" alt="Dice Table"
                         onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=&quot;font-size:4rem; cursor:pointer;&quot; onclick=&quot;loadGame(\'ceelo\')&quot; title=&quot;Real Cee-Lo Dice Game&quot;>üé≤</div>';">
                </div>
                <div class="room-blackjack" onclick="loadGame('blackjack')" title="Casino-Grade Blackjack">
                    <img src="bj.png" alt="Blackjack Table"
                         onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=&quot;font-size:4rem; cursor:pointer;&quot; onclick=&quot;loadGame(\'blackjack\')&quot; title=&quot;Casino-Grade Blackjack&quot;>üÉè</div>';">
                </div>
                <div class="room-cashier" onclick="showMessage('You already got your chips from the cashier!', 'hint')" title="Cashier Booth">
                    <img src="cashier.png" alt="Cashier Booth"
                         onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=&quot;font-size:4rem; cursor:pointer;&quot; onclick=&quot;showMessage(\'You already got your chips from the cashier!\', \'hint\')&quot; title=&quot;Cashier Booth&quot;>üë©‚Äçüíº</div>';">
                </div>
                <div class="room-phone" onclick="openPhone()" title="Keith's Phone">
                    <img src="phone.png" alt="Keith's Phone"
                         onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=&quot;font-size:2rem; cursor:pointer;&quot; onclick=&quot;openPhone()&quot; title=&quot;Keith\'s Phone&quot;>üì±</div>';">
                </div>
            </div>
            <div class="table-items-container">
                <img src="glassfull.png" alt="Champagne" class="champagne-glass" id="champagneGlass" onclick="drinkChampagne()" title="Champagne"
                     onerror="this.style.display='none'; document.getElementById('champagneFallback').style.display='flex';">
                <div class="champagne-fallback" id="champagneFallback" style="display:none;" onclick="drinkChampagne()" title="Champagne">ü•Ç</div>
            </div>
            
            <!-- DRINKING ANIMATION AT MIDDLE-BOTTOM FULL SIZE -->
            <div class="drinking-overlay" id="drinkingOverlay" style="display: none; position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); z-index: 2000; width: 100%; max-width: 600px; height: auto;">
                <img src="drinking.png" alt="Drinking Animation" class="drinking-animation" style="width: 100%; height: auto; object-fit: contain;">
            </div>
            
            <div class="drunk-item earring-item">üíé</div>
            <div class="drunk-item bra-item">üëô</div>
            <div class="drunk-item panties-item">ü©≤</div>
            <div class="drunk-item heels-item">üë†</div>
        </div>

        <!-- SLOTS GAME SCENE -->
        <div class="scene casino-scene" id="slotsScene">
            <div class="game-interface">
                <h2 class="game-title">Keith's Professional Slots</h2>
                <p style="margin-bottom: 15px; color: var(--keith-gold);"><strong>RTP: 92% | 3x3 Reels | 5 Paylines | Keith-Themed Symbols</strong></p>
                <div id="slotsContainer" class="slots-machine-container"></div>
                <div class="slots-controls">
                    <div class="bet-controls">
                        <label>Bet Amount:</label>
                        <button onclick="setSlotsbet(1)" class="bet-btn">1</button>
                        <button onclick="setSlotsbet(5)" class="bet-btn">5</button>
                        <button onclick="setSlotsbet(10)" class="bet-btn active">10</button>
                        <button onclick="setSlotsbet(25)" class="bet-btn">25</button>
                        <button onclick="setSlotsbet(50)" class="bet-btn">50</button>
                        <button onclick="setSlotsbet(100)" class="bet-btn">100</button>
                    </div>
                    <button class="btn spin-btn" onclick="spinSlots()" id="spinButton">üé∞ SPIN REELS üé∞</button>
                </div>
                <div class="slots-stats">
                    <div class="stat-row">
                        <span>Balance: <strong id="slotsBalance">500</strong> chips</span>
                        <span>Bet: <strong id="slotsBet">10</strong> chips</span>
                        <span>Last Win: <strong id="slotsLastWin">0</strong> chips</span>
                    </div>
                    <div class="stat-row">
                        <span>Spins: <strong id="slotsSpins">0</strong></span>
                        <span>Current RTP: <strong id="slotsRTP">0.0%</strong></span>
                        <span>Target RTP: <strong>92.0%</strong></span>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="backToBooth()">‚Üê Back to VIP Booth</button>
                <div class="paytable">
                    <h3>Keith's Symbol Paytable</h3>
                    <div class="paytable-grid">
                        <div class="paytable-row"><span>K K K</span><span>KEITH JACKPOT</span><span>1000x</span></div>
                        <div class="paytable-row"><span>U U U</span><span>ULTRA</span><span>500x</span></div>
                        <div class="paytable-row"><span>üé≠ üé≠ üé≠</span><span>DR. OCTAGON</span><span>250x</span></div>
                        <div class="paytable-row"><span>üëπ üëπ üëπ</span><span>DR. DOOM</span><span>100x</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CEE-LO DICE SCENE -->
        <div class="scene casino-scene" id="ceeloScene">
            <div class="game-interface">
                <h2 class="game-title">Keith's Cee-Lo</h2>
                <p style="margin-bottom: 20px;">Real street dice! Roll 4-5-6 to win big!</p>
                <div class="dice-container">
                    <div class="dice" id="dice1">?</div>
                    <div class="dice" id="dice2">?</div>
                    <div class="dice" id="dice3">?</div>
                </div>
                <div style="margin: 20px 0;">
                    <p style="font-size: 1.2rem; color: var(--keith-gold);">Bet Amount:</p>
                    <input type="number" id="ceelobBet" min="10" max="500" value="50" style="background: #333; color: white; border: 2px solid var(--keith-gold); border-radius: 5px; padding: 10px; margin: 10px; text-align: center;">
                </div>
                <button class="btn" onclick="rollCeelo()">Roll Dice</button>
                <button class="btn btn-secondary" onclick="backToBooth()">‚Üê Back to VIP Booth</button>
                <div id="ceeloResult" style="margin-top: 20px; font-size: 1.1rem;"></div>
            </div>
        </div>

        <!-- BLACKJACK SCENE -->
        <div class="scene casino-scene" id="blackjackScene">
            <div class="game-interface">
                <h2 class="game-title">Keith's Blackjack</h2>
                <p style="margin-bottom: 20px;">Beat the dealer! Get close to 21 without going over.</p>
                <div class="blackjack-table">
                    <div style="margin-bottom: 20px;">
                        <p style="color: white; margin-bottom: 10px;">Dealer's Hand (<span id="dealerScore">?</span>):</p>
                        <div class="card-hand" id="dealerHand"></div>
                    </div>
                    <div>
                        <p style="color: white; margin-bottom: 10px;">Your Hand (<span id="playerScore">0</span>):</p>
                        <div class="card-hand" id="playerHand"></div>
                    </div>
                </div>
                <div style="margin: 20px 0;">
                    <p style="font-size: 1.2rem; color: var(--keith-gold);">Bet Amount:</p>
                    <input type="number" id="blackjackBet" min="50" max="500" value="100" style="background: #333; color: white; border: 2px solid var(--keith-gold); border-radius: 5px; padding: 10px; margin: 10px; text-align: center;">
                </div>
                <div id="blackjackControls">
                    <button class="btn" onclick="dealCards()">Deal Cards</button>
                </div>
                <button class="btn btn-secondary" onclick="backToBooth()">‚Üê Back to VIP Booth</button>
                <div id="blackjackResult" style="margin-top: 20px; font-size: 1.1rem;"></div>
            </div>
        </div>
    </div>
    
    <!-- UI PANEL -->
    <div class="ui-panel" id="uiPanel">
        <div class="chip-display">üí∞ Chips: <span id="chipCount">500</span></div>
        <div class="drink-counter">üç∑ Drinks: <span id="drinkCount">0</span>/10</div>
        <div class="player-info">Player: <span id="playerDisplay">Guest</span></div>
    </div>
    
    <!-- PIN PAD OVERLAY -->
    <div class="pin-overlay" id="pinOverlay">
        <div class="pin-pad">
            <button class="pin-close" onclick="hidePinPad()">√ó</button>
            <div class="pin-display" id="pinDisplay">***</div>
            <div class="pin-buttons">
                <button class="pin-btn" onclick="enterPin('1')">1</button>
                <button class="pin-btn" onclick="enterPin('2')">2</button>
                <button class="pin-btn" onclick="enterPin('3')">3</button>
                <button class="pin-btn" onclick="enterPin('4')">4</button>
                <button class="pin-btn" onclick="enterPin('5')">5</button>
                <button class="pin-btn" onclick="enterPin('6')">6</button>
                <button class="pin-btn" onclick="enterPin('7')">7</button>
                <button class="pin-btn" onclick="enterPin('8')">8</button>
                <button class="pin-btn" onclick="enterPin('9')">9</button>
                <button class="pin-btn" onclick="clearPin()">C</button>
                <button class="pin-btn" onclick="enterPin('0')">0</button>
                <button class="pin-btn" onclick="submitPin()">‚úì</button>
            </div>
        </div>
    </div>
    
    <!-- MESSAGE DISPLAY -->
    <div class="message-display" id="messageDisplay"></div>
    
    <!-- LOCKOUT SCREEN -->
    <div class="lockout-screen" id="lockoutScreen">
        <div class="lockout-content">
            <div class="lockout-title">ACCESS DENIED</div>
            <div id="lockoutMessage">You've been ejected from the club.</div>
            <button class="btn" onclick="resetClub()">Start Over (Testing)</button>
        </div>
    </div>

    <!-- AUDIO CONTROLS -->
    <div class="audio-controls" id="audioControls">
        <div>‚ô™ Now Playing: <span id="currentTrack">Apartment 223</span></div>
    </div>

    <!-- HIDDEN AUDIO ELEMENT -->
    <audio id="apartment223Audio" preload="none">
        <source src="photos/apartment223.mp3" type="audio/mpeg">
    </audio>

    <!-- SCRIPTS -->
    <script src="js/main.js"></script>
    <script>
        console.log('HTML loaded - checking for main.js...');
        
        // COMPLETE FALLBACK SYSTEM WITH FULL DRINKING ANIMATION
        if (typeof showPinPad === 'undefined') {
            console.error('main.js failed to load! Using complete fallback functions...');
            
            let currentPin = '';
            let pinAttempts = 0;
            let playerName = '';
            let drinkCount = 0;
            let chips = 500;
            
            // BASIC GAME STATE
            let slotsData = {
                balance: 500,
                bet: 10,
                spins: 0,
                totalWagered: 0,
                totalWon: 0,
                lastWin: 0
            };
            
            let blackjackData = {
                deck: [],
                playerHand: [],
                dealerHand: [],
                gameActive: false
            };
            
            function showPinPad() {
                document.getElementById('pinOverlay').style.display = 'flex';
                updatePinDisplay();
            }
            
            function hidePinPad() {
                document.getElementById('pinOverlay').style.display = 'none';
            }
            
            function enterPin(digit) {
                if (currentPin.length < 3) {
                    currentPin += digit;
                    updatePinDisplay();
                }
            }
            
            function clearPin() {
                currentPin = '';
                updatePinDisplay();
            }
            
            function updatePinDisplay() {
                const display = document.getElementById('pinDisplay');
                if (display) {
                    if (currentPin.length === 0) {
                        display.textContent = '***';
                    } else {
                        display.textContent = currentPin + '*'.repeat(3 - currentPin.length);
                    }
                }
            }
            
            function submitPin() {
                if (currentPin.length !== 3) {
                    showMessage('Enter 3 digits!', 'warning1');
                    return;
                }
                
                pinAttempts++;
                
                if (currentPin === '223') {
                    hidePinPad();
                    showMessage('Welcome to The Players Club!', 'success');
                    
                    // Play Apartment 223 audio
                    const audio = document.getElementById('apartment223Audio');
                    if (audio) {
                        audio.play().catch(e => console.log('Audio play failed:', e));
                        const audioControls = document.getElementById('audioControls');
                        if (audioControls) {
                            audioControls.classList.add('show');
                        }
                    }
                    
                    setTimeout(() => {
                        const clubDoor = document.getElementById('clubDoor') || document.getElementById('doorFallback');
                        if (clubDoor) {
                            clubDoor.classList.add('sliding');
                        }
                        setTimeout(() => {
                            showScene('bouncer');
                        }, 1000);
                    }, 1500);
                } else {
                    let message = '';
                    let messageType = 'warning1';
                    
                    if (pinAttempts === 1) {
                        message = 'Come on, player... you should know this one.';
                    } else if (pinAttempts === 2) {
                        message = 'Keith\'s not gonna like this... think harder, kid.';
                        messageType = 'warning2';
                    } else if (pinAttempts === 3) {
                        message = 'Alright, here\'s your hint: Dr. Doom\'s apartment number';
                        messageType = 'hint';
                    } else {
                        message = 'Too many attempts! Security is coming...';
                        messageType = 'warning3';
                        
                        setTimeout(() => {
                            document.getElementById('lockoutScreen').style.display = 'flex';
                            document.getElementById('lockoutMessage').textContent = 'You\'ve been ejected from the club. Security doesn\'t play games.';
                        }, 2000);
                    }
                    showMessage(message, messageType);
                }
                
                clearPin();
            }
            
            function showScene(sceneName) {
                document.querySelectorAll('.scene').forEach(scene => {
                    scene.classList.remove('active');
                });
                const targetScene = document.getElementById(sceneName + 'Scene');
                if (targetScene) {
                    targetScene.classList.add('active');
                }
            }
            
            function goToCashier() {
                showScene('cashier');
            }
            
            function enterVIPBooth() {
                const nameInput = document.getElementById('playerNameInput');
                if (!nameInput || !nameInput.value.trim()) {
                    showMessage('Please enter your name first!', 'warning1');
                    return;
                }
                
                playerName = nameInput.value.trim();
                const playerDisplay = document.getElementById('playerDisplay');
                if (playerDisplay) {
                    playerDisplay.textContent = playerName;
                }
                
                const uiPanel = document.getElementById('uiPanel');
                if (uiPanel) {
                    uiPanel.classList.add('show');
                }
                
                showScene('booth');
                showMessage(`Welcome to your VIP booth, ${playerName}!`, 'success');
            }
            
            function drinkChampagne() {
                drinkCount++;
                const drinkDisplay = document.getElementById('drinkCount');
                if (drinkDisplay) {
                    drinkDisplay.textContent = drinkCount;
                }
                
                // Show drinking animation
                const overlay = document.getElementById('drinkingOverlay');
                if (overlay) {
                    overlay.style.display = 'block';
                    setTimeout(() => {
                        overlay.style.display = 'none';
                    }, 1500);
                }
                
                // Apply drunk effects
                document.body.className = document.body.className.replace(/drunk-\d+/g, '');
                document.body.classList.add(`drunk-${drinkCount}`);
                
                // Show drunk items progressively
                const drunkItems = document.querySelectorAll('.drunk-item');
                if (drinkCount >= 3 && drunkItems[0]) drunkItems[0].classList.add('visible');
                if (drinkCount >= 5 && drunkItems[1]) drunkItems[1].classList.add('visible');
                if (drinkCount >= 7 && drunkItems[2]) drunkItems[2].classList.add('visible');
                if (drinkCount >= 9 && drunkItems[3]) drunkItems[3].classList.add('visible');
                
                // Messages
                if (drinkCount === 1) {
                    showMessage('That champagne hits different... ü•Ç', 'hint');
                } else if (drinkCount === 3) {
                    showMessage('Things are getting interesting... üëô', 'hint');
                } else if (drinkCount === 5) {
                    showMessage('The room is spinning a bit... ü©≤', 'hint');
                } else if (drinkCount === 7) {
                    showMessage('Keith\'s champagne is STRONG... üë†', 'hint');
                } else if (drinkCount === 10) {
                    showMessage('SECURITY! You\'re too drunk!', 'warning3');
                    setTimeout(() => {
                        document.getElementById('lockoutScreen').style.display = 'flex';
                        document.getElementById('lockoutMessage').textContent = 'You drank too much champagne! Security had to escort you out.';
                    }, 2000);
                }
            }
            
            function loadGame(gameType) {
                if (gameType === 'slots') {
                    showScene('slots');
                    initSlots();
                } else if (gameType === 'ceelo') {
                    showScene('ceelo');
                } else if (gameType === 'blackjack') {
                    showScene('blackjack');
                    initBlackjack();
                }
            }
            
            function backToBooth() {
                showScene('booth');
            }
            
            function openPhone() {
                showMessage('Keith\'s phone is ringing... "Yo, this is Keith\'s AI. What\'s good?"', 'hint');
            }
            
            function showMessage(text, type = 'hint') {
                const messageDisplay = document.getElementById('messageDisplay');
                if (messageDisplay) {
                    messageDisplay.textContent = text;
                    messageDisplay.className = `message-display show ${type}`;
                    
                    setTimeout(() => {
                        messageDisplay.classList.remove('show');
                    }, 4000);
                }
            }
            
            function resetClub() {
                location.reload();
            }
            
            // SLOTS GAME FUNCTIONS
            function initSlots() {
                createSlotsGrid();
                updateSlotsDisplay();
            }
            
            function createSlotsGrid() {
                const container = document.getElementById('slotsContainer');
                if (!container) return;
                
                container.innerHTML = '';
                
                for (let row = 0; row < 3; row++) {
                    const rowDiv = document.createElement('div');
                    rowDiv.className = 'slots-row';
                    
                    for (let col = 0; col < 3; col++) {
                        const symbol = document.createElement('div');
                        symbol.className = 'slot-symbol';
                        symbol.id = `slot-${row}-${col}`;
                        
                        const emoji = document.createElement('div');
                        emoji.className = 'symbol-emoji';
                        emoji.textContent = '?';
                        
                        const name = document.createElement('div');
                        name.className = 'symbol-name';
                        name.textContent = 'SPIN';
                        
                        symbol.appendChild(emoji);
                        symbol.appendChild(name);
                        rowDiv.appendChild(symbol);
                    }
                    
                    container.appendChild(rowDiv);
                }
            }
            
            function setSlotsbet(amount) {
                slotsData.bet = amount;
                document.querySelectorAll('.bet-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
                updateSlotsDisplay();
            }
            
            function spinSlots() {
                if (slotsData.balance < slotsData.bet) {
                    showMessage('Not enough chips!', 'warning1');
                    return;
                }
                
                slotsData.balance -= slotsData.bet;
                slotsData.spins++;
                slotsData.totalWagered += slotsData.bet;
                
                const symbols = [
                    {emoji: 'K', name: 'KEITH', payout: 1000},
                    {emoji: 'U', name: 'ULTRA', payout: 500},
                    {emoji: 'üé≠', name: 'OCTAGON', payout: 250},
                    {emoji: 'üëπ', name: 'DOOM', payout: 100},
                    {emoji: 'üíé', name: 'DIAMOND', payout: 50},
                    {emoji: 'üé§', name: 'MIC', payout: 25},
                    {emoji: 'üî•', name: 'FIRE', payout: 10},
                    {emoji: '‚≠ê', name: 'STAR', payout: 5}
                ];
                
                const grid = [];
                for (let i = 0; i < 9; i++) {
                    grid.push(symbols[Math.floor(Math.random() * symbols.length)]);
                }
                
                // Update display
                for (let i = 0; i < 9; i++) {
                    const row = Math.floor(i / 3);
                    const col = i % 3;
                    const element = document.getElementById(`slot-${row}-${col}`);
                    if (element) {
                        const emoji = element.querySelector('.symbol-emoji');
                        const name = element.querySelector('.symbol-name');
                        emoji.textContent = grid[i].emoji;
                        name.textContent = grid[i].name;
                        element.classList.remove('winning-symbol');
                    }
                }
                
                // Check for wins
                const paylines = [
                    [0, 1, 2], // Top row
                    [3, 4, 5], // Middle row
                    [6, 7, 8], // Bottom row
                    [0, 4, 8], // Diagonal
                    [2, 4, 6]  // Anti-diagonal
                ];
                
                let totalWin = 0;
                
                paylines.forEach(line => {
                    const [a, b, c] = line;
                    if (grid[a].emoji === grid[b].emoji && grid[b].emoji === grid[c].emoji) {
                        const payout = grid[a].payout * slotsData.bet / 100;
                        totalWin += payout;
                        
                        // Highlight winning symbols
                        line.forEach(pos => {
                            const row = Math.floor(pos / 3);
                            const col = pos % 3;
                            const element = document.getElementById(`slot-${row}-${col}`);
                            if (element) {
                                element.classList.add('winning-symbol');
                            }
                        });
                    }
                });
                
                if (totalWin > 0) {
                    slotsData.balance += totalWin;
                    slotsData.totalWon += totalWin;
                    slotsData.lastWin = totalWin;
                    showMessage(`Big win! +${totalWin} chips!`, 'success');
                } else {
                    slotsData.lastWin = 0;
                }
                
                updateSlotsDisplay();
                updateChipDisplay();
            }
            
            function updateSlotsDisplay() {
                const elements = {
                    balance: document.getElementById('slotsBalance'),
                    bet: document.getElementById('slotsBet'),
                    lastWin: document.getElementById('slotsLastWin'),
                    spins: document.getElementById('slotsSpins'),
                    rtp: document.getElementById('slotsRTP')
                };
                
                if (elements.balance) elements.balance.textContent = slotsData.balance;
                if (elements.bet) elements.bet.textContent = slotsData.bet;
                if (elements.lastWin) elements.lastWin.textContent = slotsData.lastWin;
                if (elements.spins) elements.spins.textContent = slotsData.spins;
                
                if (elements.rtp && slotsData.totalWagered > 0) {
                    const rtp = (slotsData.totalWon / slotsData.totalWagered * 100).toFixed(1);
                    elements.rtp.textContent = rtp + '%';
                }
            }
            
            // CEE-LO DICE GAME
            function rollCeelo() {
                const betInput = document.getElementById('ceelobBet');
                const bet = parseInt(betInput.value) || 50;
                
                if (chips < bet) {
                    showMessage('Not enough chips!', 'warning1');
                    return;
                }
                
                chips -= bet;
                updateChipDisplay();
                
                // Roll three dice
                const dice = [
                    Math.floor(Math.random() * 6) + 1,
                    Math.floor(Math.random() * 6) + 1,
                    Math.floor(Math.random() * 6) + 1
                ];
                
                // Update dice display with animation
                const diceElements = [
                    document.getElementById('dice1'),
                    document.getElementById('dice2'),
                    document.getElementById('dice3')
                ];
                
                diceElements.forEach(die => die.classList.add('rolling'));
                
                setTimeout(() => {
                    diceElements.forEach((die, i) => {
                        die.textContent = dice[i];
                        die.classList.remove('rolling');
                    });
                    
                    // Calculate result
                    const result = calculateCeeloResult(dice, bet);
                    const resultDiv = document.getElementById('ceeloResult');
                    if (resultDiv) {
                        resultDiv.innerHTML = result.message;
                    }
                    
                    if (result.winnings > 0) {
                        chips += result.winnings;
                        updateChipDisplay();
                        showMessage(`You won ${result.winnings} chips!`, 'success');
                    }
                }, 1000);
            }
            
            function calculateCeeloResult(dice, bet) {
                const sorted = [...dice].sort((a, b) => b - a);
                
                // Check for special combinations
                if (dice.includes(4) && dice.includes(5) && dice.includes(6)) {
                    return {
                        winnings: bet * 3,
                        message: '<p style="color: gold; font-weight: bold;">üéâ 4-5-6! AUTOMATIC WIN! üéâ</p><p>Triple payout!</p>'
                    };
                }
                
                if (dice.includes(1) && dice.includes(2) && dice.includes(3)) {
                    return {
                        winnings: 0,
                        message: '<p style="color: red; font-weight: bold;">üíÄ 1-2-3! AUTOMATIC LOSS! üíÄ</p><p>Better luck next time!</p>'
                    };
                }
                
                // Check for trips (three of a kind)
                if (dice[0] === dice[1] && dice[1] === dice[2]) {
                    return {
                        winnings: bet * 2,
                        message: `<p style="color: gold; font-weight: bold;">üî• TRIPS ${dice[0]}s! üî•</p><p>Double payout!</p>`
                    };
                }
                
                // Check for pair (point game)
                const counts = {};
                dice.forEach(d => counts[d] = (counts[d] || 0) + 1);
                
                for (let num in counts) {
                    if (counts[num] === 2) {
                        const point = dice.find(d => d != num);
                        if (point >= 4) {
                            return {
                                winnings: bet * 1.5,
                                message: `<p style="color: lightgreen;">Point: ${point} (High point wins!)</p><p>1.5x payout!</p>`
                            };
                        } else {
                            return {
                                winnings: 0,
                                message: `<p style="color: orange;">Point: ${point} (Low point loses)</p><p>Try again!</p>`
                            };
                        }
                    }
                }
                
                return {
                    winnings: 0,
                    message: '<p style="color: gray;">No winning combination. Roll again!</p>'
                };
            }
            
            // BLACKJACK GAME
            function initBlackjack() {
                blackjackData.deck = createDeck();
                blackjackData.playerHand = [];
                blackjackData.dealerHand = [];
                blackjackData.gameActive = false;
                
                document.getElementById('dealerHand').innerHTML = '';
                document.getElementById('playerHand').innerHTML = '';
                document.getElementById('dealerScore').textContent = '?';
                document.getElementById('playerScore').textContent = '0';
                document.getElementById('blackjackResult').innerHTML = '';
                document.getElementById('blackjackControls').innerHTML = '<button class="btn" onclick="dealCards()">Deal Cards</button>';
            }
            
            function createDeck() {
                const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
                const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
                const deck = [];
                
                suits.forEach(suit => {
                    ranks.forEach(rank => {
                        deck.push({
                            suit: suit,
                            rank: rank,
                            value: rank === 'A' ? 11 : (rank === 'J' || rank === 'Q' || rank === 'K') ? 10 : parseInt(rank)
                        });
                    });
                });
                
                // Shuffle deck
                for (let i = deck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [deck[i], deck[j]] = [deck[j], deck[i]];
                }
                
                return deck;
            }
            
            function dealCards() {
                const betInput = document.getElementById('blackjackBet');
                const bet = parseInt(betInput.value) || 100;
                
                if (chips < bet) {
                    showMessage('Not enough chips!', 'warning1');
                    return;
                }
                
                chips -= bet;
                updateChipDisplay();
                
                blackjackData.gameActive = true;
                blackjackData.playerHand = [blackjackData.deck.pop(), blackjackData.deck.pop()];
                blackjackData.dealerHand = [blackjackData.deck.pop(), blackjackData.deck.pop()];
                
                updateBlackjackDisplay();
                
                document.getElementById('blackjackControls').innerHTML = `
                    <button class="btn" onclick="hit()">Hit</button>
                    <button class="btn btn-secondary" onclick="stand()">Stand</button>
                `;
                
                // Check for blackjack
                if (calculateBlackjackScore(blackjackData.playerHand) === 21) {
                    endBlackjackGame('Blackjack! You win!', bet * 2.5);
                }
            }
            
            function hit() {
                if (!blackjackData.gameActive) return;
                
                blackjackData.playerHand.push(blackjackData.deck.pop());
                updateBlackjackDisplay();
                
                const score = calculateBlackjackScore(blackjackData.playerHand);
                if (score > 21) {
                    endBlackjackGame('Bust! You lose!', 0);
                } else if (score === 21) {
                    stand();
                }
            }
            
            function stand() {
                if (!blackjackData.gameActive) return;
                
                // Dealer plays
                while (calculateBlackjackScore(blackjackData.dealerHand) < 17) {
                    blackjackData.dealerHand.push(blackjackData.deck.pop());
                }
                
                updateBlackjackDisplay(true);
                
                const playerScore = calculateBlackjackScore(blackjackData.playerHand);
                const dealerScore = calculateBlackjackScore(blackjackData.dealerHand);
                const bet = parseInt(document.getElementById('blackjackBet').value) || 100;
                
                if (dealerScore > 21) {
                    endBlackjackGame('Dealer busts! You win!', bet * 2);
                } else if (playerScore > dealerScore) {
                    endBlackjackGame('You win!', bet * 2);
                } else if (playerScore < dealerScore) {
                    endBlackjackGame('Dealer wins!', 0);
                } else {
                    endBlackjackGame('Push! Tie game!', bet);
                }
            }
            
            function calculateBlackjackScore(hand) {
                let score = 0;
                let aces = 0;
                
                hand.forEach(card => {
                    if (card.rank === 'A') {
                        aces++;
                        score += 11;
                    } else {
                        score += card.value;
                    }
                });
                
                while (score > 21 && aces > 0) {
                    score -= 10;
                    aces--;
                }
                
                return score;
            }
            
            function updateBlackjackDisplay(showDealerCards = false) {
                const dealerHand = document.getElementById('dealerHand');
                const playerHand = document.getElementById('playerHand');
                
                // Update dealer hand
                dealerHand.innerHTML = '';
                blackjackData.dealerHand.forEach((card, index) => {
                    const cardDiv = document.createElement('div');
                    cardDiv.className = `playing-card ${card.suit === '‚ô•' || card.suit === '‚ô¶' ? 'red' : ''}`;
                    
                    if (index === 1 && !showDealerCards && blackjackData.gameActive) {
                        cardDiv.innerHTML = '<div style="font-size: 1.5rem;">?</div>';
                    } else {
                        cardDiv.innerHTML = `<div>${card.rank}</div><div>${card.suit}</div>`;
                    }
                    
                    dealerHand.appendChild(cardDiv);
                });
                
                // Update player hand
                playerHand.innerHTML = '';
                blackjackData.playerHand.forEach(card => {
                    const cardDiv = document.createElement('div');
                    cardDiv.className = `playing-card ${card.suit === '‚ô•' || card.suit === '‚ô¶' ? 'red' : ''}`;
                    cardDiv.innerHTML = `<div>${card.rank}</div><div>${card.suit}</div>`;
                    playerHand.appendChild(cardDiv);
                });
                
                // Update scores
                document.getElementById('playerScore').textContent = calculateBlackjackScore(blackjackData.playerHand);
                
                if (showDealerCards) {
                    document.getElementById('dealerScore').textContent = calculateBlackjackScore(blackjackData.dealerHand);
                } else {
                    document.getElementById('dealerScore').textContent = '?';
                }
            }
            
            function endBlackjackGame(message, winnings) {
                blackjackData.gameActive = false;
                chips += winnings;
                updateChipDisplay();
                
                document.getElementById('blackjackResult').innerHTML = `<p style="color: ${winnings > 0 ? 'gold' : 'red'}; font-weight: bold;">${message}</p>`;
                document.getElementById('blackjackControls').innerHTML = '<button class="btn" onclick="dealCards()">Deal New Hand</button>';
                
                if (winnings > 0) {
                    showMessage(`Won ${winnings} chips!`, 'success');
                }
            }
            
            function updateChipDisplay() {
                const chipDisplay = document.getElementById('chipCount');
                if (chipDisplay) {
                    chipDisplay.textContent = chips;
                }
                
                // Update slots balance if in slots
                slotsData.balance = chips;
                const slotsBalance = document.getElementById('slotsBalance');
                if (slotsBalance) {
                    slotsBalance.textContent = chips;
                }
            }
            
            console.log('Fallback functions loaded successfully!');
        } else {
            console.log('main.js loaded successfully!');
        }
    </script>
</body>
</html>
